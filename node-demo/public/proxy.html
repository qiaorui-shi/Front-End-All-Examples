<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 1. proxyå¦‚ä½•å¯¹å¯¹è±¡è¿›è¡Œæ‹¦æˆªçš„ï¼Œæ ¸å¿ƒåŸç†æ˜¯é€šè¿‡é€’å½’ä»£ç†å’Œå»¶è¿Ÿä»£ç†(æƒ°æ€§ä»£ç†)ç›¸ç»“åˆï¼Œç¡®ä¿æ¯ä¸€å±‚çš„å±æ€§è®¿é—®éƒ½èƒ½è¢«æ‹¦æˆª
      // 2. æ­£å¸¸proxyåªä»£ç†ç¬¬ä¸€å±‚ï¼Œå½“è®¿é—®åˆ°ä¸‹é¢listçš„æ—¶å€™å‘ç°listæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šå¯¹listè¿›è¡Œä»£ç†ï¼Œè¿™å°±æ˜¯å»¶è¿Ÿï¼ˆæƒ°æ€§ï¼‰ä»£ç†
      // 3. ç›¸æ¯”äºObject.definePropertyï¼ŒProxyä¸éœ€è¦é€’å½’ä»£ç†æ‰€æœ‰å±æ€§ï¼Œæ€§èƒ½æé«˜äº†
      // 4. proxyåœ¨ä¸ä¼ é€’handlerä¸­çš„æ–¹æ³•æƒ…å†µä¸‹,V8å¼•æ“ä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤çš„è¡Œä¸º,è¯¥é»˜è®¤è¡Œä¸ºç­‰åŒäºReflect.get(target, prop, receiver)
      const a = new Proxy(
        {
          name: "å¼ ä¸‰",
          age: "28",
          list: [
            { childName: "å°æ˜", age: "8" },
            { childName: "å°çº¢", age: "6" }
          ]
        },
        {
          get(target, prop, receiver) {
            console.log("ğŸš€ ~ get ~ target, prop:", target, prop, receiver);
            // é”™è¯¯æ–¹å¼ï¼šç›´æ¥è¿”å› target[prop] ä¼šä¸¢å¤± this ç»‘å®š
            // return target[prop];
            // æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨ Reflect.get ä¼ é€’ receiver
            return Reflect.get(target, prop, receiver);
          },
          set(target, prop, value) {
            console.log("ğŸš€ ~ target, prop, value:", target, prop, value);
            return (target[prop] = value);
          },
          has(taget, prop, value) {
            console.log("ğŸš€ ~ has ~ taget, prop, value:", taget, prop, value);
            return prop in taget;
          },
          deleteProperty(target, prop) {
            console.log("ğŸš€ ~ deleteProperty ~ target, prop:", target, prop);
            return delete target[prop];
          }
        }
      );
      a.list[0].childName = "å°yang";
      console.log(111, a.list[0].childName);
    </script>
  </body>
</html>
